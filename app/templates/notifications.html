{%- extends "base.html" %}
{% from "_helpers.html" import format_notification, format_datetime %}

{% block title %}Notifications{% endblock %}

{% block main %}
<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="position-sticky pt-3">
        <h5>Selected services</h5>
        <form action="" method="POST">
          {% for service in services %}
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="{{ service.category }}"
              name="{{ service.category }}" {% if service.is_subscribed %}checked{% endif %}>
            <label class="form-check-label" for="{{ service.category }}">
              {{ service.category }}
            </label>
          </div>
          {% endfor %}
        </form>
      </div>
    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Notifications</h1>
      </div>
      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">Category</th>
              <th scope="col">Timestamp</th>
              <th scope="col">Message</th>
            </tr>
          </thead>
          <tbody>
            {% for notification in notifications %}
            <tr>
              <td>{{ categories[notification.service_id] }}</td>
              <td>{{ format_datetime(notification.timestamp) }}</td>
              <td>{{ format_notification(notification) }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
    </main>

  </div>
</div>
{%- endblock %}
